<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
  </PropertyGroup>

  <Import Project="$(MSBuildThisFileDirectory)..\Build\ExtrasShim.targets" Condition="'$(ExtrasDisableExtrasSdkLegacyCompat)' != 'true'"/>

  <PropertyGroup Condition="'$(TargetFrameworks)' != '' AND '$(TargetFramework)' == ''">
    <IsMultiTargetingBuild>true</IsMultiTargetingBuild>
  </PropertyGroup>

  <Import Project="$(MSBuildThisFileDirectory)ReferenceAssembly.targets"/>

  <ImportGroup Condition="'$(IsMultiTargetingBuild)' != 'true'">
    <Import Project="$(MSBuildThisFileDirectory)Inference.targets"
            Condition="'$(TargetFramework)' != '' AND !($(TargetFramework.Contains(',')) OR $(TargetFramework.Contains(';')))"/>
    <Import Project="$(MSBuildThisFileDirectory)Platforms.targets"
            Condition="'$(TargetFrameworkIdentifier)' != ''"/>
  </ImportGroup>

  <Import Project="$(MSBuildThisFileDirectory)..\DefaultItems\DefaultItems.targets"/>
  <Import Project="$(MSBuildThisFileDirectory)..\ProjectSystem\ProjectSystem.targets"/>

  <!--
    Detect the SDK version. For now, we have to check the NETCoreSdkVersion
    else check BundledNETCoreAppTargetFrameworkVersion property for Sdk <= 2.1.300
    else Give 1.0 version since that property doesn't exist in 1.x Sdks
  -->
  <PropertyGroup>
    <_NETCoreSdkVersion>$(NETCoreSdkVersion)</_NETCoreSdkVersion>
    <!--  Handle SemVer version like 2.1.300-preview, since MSBuild doesn't compare versions with alpha-numeric chars! -->
    <_NETCoreSdkVersion Condition="$(_NETCoreSdkVersion.Contains('-'))">$(_NETCoreSdkVersion.Split('-')[0])</_NETCoreSdkVersion>
    <_NETCoreSdkVersion Condition="'$(_NETCoreSdkVersion)' == ''">$(BundledNETCoreAppTargetFrameworkVersion)</_NETCoreSdkVersion>
    <_NETCoreSdkVersion Condition="'$(_NETCoreSdkVersion)' == ''">1.0</_NETCoreSdkVersion>
  </PropertyGroup>


</Project>